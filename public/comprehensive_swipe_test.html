<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ì™€ì´í”„ ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            font-size: 14px;
        }

        .test-container {
            max-width: 100%;
            width: 100%;
            margin: 0 auto;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #333;
            margin: 10px 0 20px 0;
            font-size: 20px;
            font-weight: 600;
        }

        h2 {
            font-size: 16px;
            color: #555;
            margin: 10px 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 8px;
        }

        .test-section {
            margin: 15px 0;
            padding: 12px;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            background: #fafafa;
        }

        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px 3px;
            font-size: 14px;
            font-weight: 500;
            width: calc(50% - 6px);
            display: inline-block;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .test-button:active {
            transform: translateY(0);
        }

        .test-button.full-width {
            width: calc(100% - 6px);
        }

        .log-area {
            background: #1a1a1a;
            color: #00ff00;
            border: 1px solid #333;
            border-radius: 15px;
            padding: 12px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            white-space: pre-wrap;
            line-height: 1.4;
        }

        .status {
            padding: 8px 12px;
            border-radius: 15px;
            margin: 8px 0;
            font-size: 13px;
            font-weight: 500;
        }

        .status.success {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .status.error {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
        }

        .status.warning {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        .status.info {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }

        /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
        @media (max-width: 480px) {
            body {
                padding: 5px;
                font-size: 13px;
            }

            .test-container {
                padding: 10px;
                border-radius: 15px;
            }

            h1 {
                font-size: 18px;
            }

            h2 {
                font-size: 15px;
            }

            .test-button {
                width: 100%;
                margin: 3px 0;
                padding: 14px 16px;
                font-size: 13px;
            }

            .log-area {
                max-height: 250px;
                font-size: 10px;
            }
        }

        /* ì„¸ë¡œ ëª¨ë“œ ìµœì í™” */
        @media (orientation: portrait) {
            .test-button {
                width: 100%;
                margin: 5px 0;
            }
        }

        /* ê°€ë¡œ ëª¨ë“œ ìµœì í™” */
        @media (orientation: landscape) and (max-height: 600px) {
            .test-section {
                margin: 10px 0;
                padding: 8px;
            }

            .log-area {
                max-height: 200px;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
        .log-area::-webkit-scrollbar {
            width: 6px;
        }

        .log-area::-webkit-scrollbar-track {
            background: #2a2a2a;
            border-radius: 3px;
        }

        .log-area::-webkit-scrollbar-thumb {
            background: #00ff00;
            border-radius: 3px;
        }

        .log-area::-webkit-scrollbar-thumb:hover {
            background: #00cc00;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ ìŠ¤ì™€ì´í”„ ì‹œìŠ¤í…œ ì¢…í•© ì§„ë‹¨</h1>

        <div class="test-section">
            <h2>1. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸</h2>
            <button class="test-button" id="check-system-btn">ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸</button>
            <div id="system-status"></div>
        </div>

        <div class="test-section">
            <h2>2. DOM ìš”ì†Œ ê²€ì¦</h2>
            <button class="test-button" id="check-dom-btn">DOM ìš”ì†Œ í™•ì¸</button>
            <div id="dom-status"></div>
        </div>

        <div class="test-section">
            <h2>3. ë©”ì¸ ì•± ì—°ê²°</h2>
            <button class="test-button" id="open-app-btn">ë©”ì¸ ì•± ì—´ê¸°</button>
            <button class="test-button" id="load-frame-btn">í”„ë ˆì„ìœ¼ë¡œ ë¡œë“œ</button>
            <div id="app-frame-container" style="margin-top: 10px;"></div>
        </div>

        <div class="test-section">
            <h2>4. ìë™ ìŠ¤ì™€ì´í”„ í…ŒìŠ¤íŠ¸</h2>
            <button class="test-button" id="swipe-test-btn">ğŸ“± ìŠ¤ì™€ì´í”„ í…ŒìŠ¤íŠ¸</button>
            <button class="test-button" id="button-test-btn">ğŸ”˜ ë²„íŠ¼ í…ŒìŠ¤íŠ¸</button>
            <button class="test-button full-width" id="comprehensive-test-btn">ğŸš€ ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š í…ŒìŠ¤íŠ¸ ë¡œê·¸</h2>
            <button class="test-button full-width" id="clear-log-btn">ğŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°</button>
            <div id="test-log" class="log-area">í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ. ìœ„ì˜ ë²„íŠ¼ë“¤ì„ í´ë¦­í•˜ì—¬ ì§„ë‹¨ì„ ì‹œì‘í•˜ì„¸ìš”.\n</div>
        </div>
    </div>

    <script>
        function log(message, type = 'info') {
            const logArea = document.getElementById('test-log');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            logArea.textContent += logEntry;
            logArea.scrollTop = logArea.scrollHeight;

            console.log(message);
        }

        function setStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function checkSystemStatus() {
            log('ğŸ” ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì‹œì‘...');

            try {
                // í˜„ì¬ í˜ì´ì§€ì—ì„œ í™•ì¸
                const hasUIInstance = typeof window.ui !== 'undefined';
                const hasUIManager = typeof UIManager !== 'undefined';

                log(`- UI ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬: ${hasUIInstance}`);
                log(`- UIManager í´ë˜ìŠ¤ ì¡´ì¬: ${hasUIManager}`);

                if (hasUIInstance) {
                    log(`- íŒŒíŠ¸ë„ˆ ìŠ¤ì™€ì´í¼ ì´ˆê¸°í™”: ${window.ui.partnerSwiperInitialized || false}`);
                    log(`- í˜„ì¬ íŒŒíŠ¸ë„ˆ ì¸ë±ìŠ¤: ${window.ui.currentPartnerIndex || 0}`);
                    log(`- íŒŒíŠ¸ë„ˆ ë°°ì—´ ê¸¸ì´: ${window.ui.currentPartners?.length || 0}`);
                    setStatus('system-status', 'âœ… UI ì‹œìŠ¤í…œì´ ë¡œë“œë˜ì–´ ìˆìŠµë‹ˆë‹¤', 'success');
                } else {
                    setStatus('system-status', 'âš ï¸ UI ì‹œìŠ¤í…œì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë©”ì¸ ì•±ì—ì„œ í™•ì¸ í•„ìš”', 'warning');
                }

            } catch (error) {
                log(`âŒ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜: ${error.message}`);
                setStatus('system-status', `âŒ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        function checkDOMElements() {
            log('ğŸ” DOM ìš”ì†Œ í™•ì¸ ì‹œì‘...');

            const elements = [
                'mobile-partner-swiper',
                'partner-cards-container',
                'prev-partner-btn',
                'next-partner-btn'
            ];

            let foundCount = 0;
            elements.forEach(id => {
                const element = document.getElementById(id);
                const exists = element !== null;
                log(`- #${id}: ${exists ? 'âœ… ì¡´ì¬' : 'âŒ ì—†ìŒ'}`);
                if (exists) foundCount++;
            });

            if (foundCount === elements.length) {
                setStatus('dom-status', 'âœ… ëª¨ë“  í•„ìˆ˜ DOM ìš”ì†Œê°€ ì¡´ì¬í•©ë‹ˆë‹¤', 'success');
            } else {
                setStatus('dom-status', `âš ï¸ ${foundCount}/${elements.length} ìš”ì†Œë§Œ ë°œê²¬ë¨. ë©”ì¸ ì•±ì—ì„œ í™•ì¸ í•„ìš”`, 'warning');
            }
        }

        function openMainApp() {
            log('ğŸš€ ë©”ì¸ ì•± ìƒˆ ì°½ìœ¼ë¡œ ì—´ê¸°...');
            window.open('http://localhost:3000', '_blank');
        }

        function loadMainAppFrame() {
            log('ğŸš€ ë©”ì¸ ì•± í”„ë ˆì„ìœ¼ë¡œ ë¡œë“œ...');
            const container = document.getElementById('app-frame-container');
            container.innerHTML = '<iframe src="http://localhost:3000" width="100%" height="600" style="border: 1px solid #ccc; border-radius: 5px;"></iframe>';
        }

        function runSwipeTest() {
            log('ğŸ“± ìŠ¤ì™€ì´í”„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰...');

            // ë©”ì¸ ì•±ì—ì„œ ì‹¤í–‰ë  ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
            const testScript = `
                // ìŠ¤ì™€ì´í”„ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸
                console.log('ğŸ§ª [Test] ìŠ¤ì™€ì´í”„ í…ŒìŠ¤íŠ¸ ì‹œì‘');

                if (window.ui) {
                    console.log('âœ… UI ì¸ìŠ¤í„´ìŠ¤ ë°œê²¬');
                    console.log('í˜„ì¬ ì¸ë±ìŠ¤:', window.ui.currentPartnerIndex);

                    // ìˆ˜ë™ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸
                    window.ui.navigatePartnerCard('next');

                    setTimeout(() => {
                        console.log('ì´ë™ í›„ ì¸ë±ìŠ¤:', window.ui.currentPartnerIndex);
                        window.ui.navigatePartnerCard('prev');
                    }, 1000);
                } else {
                    console.error('âŒ UI ì¸ìŠ¤í„´ìŠ¤ ì—†ìŒ');
                }
            `;

            log('ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë©”ì¸ ì•± ì½˜ì†”ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”:');
            log(testScript);
        }

        function runButtonTest() {
            log('ğŸ”˜ ë²„íŠ¼ í…ŒìŠ¤íŠ¸ ì‹¤í–‰...');

            const testScript = `
                // ë²„íŠ¼ í´ë¦­ í…ŒìŠ¤íŠ¸
                const prevBtn = document.getElementById('prev-partner-btn');
                const nextBtn = document.getElementById('next-partner-btn');

                console.log('ì´ì „ ë²„íŠ¼:', prevBtn);
                console.log('ë‹¤ìŒ ë²„íŠ¼:', nextBtn);

                if (nextBtn) {
                    console.log('ë‹¤ìŒ ë²„íŠ¼ í´ë¦­...');
                    nextBtn.click();

                    setTimeout(() => {
                        if (prevBtn) {
                            console.log('ì´ì „ ë²„íŠ¼ í´ë¦­...');
                            prevBtn.click();
                        }
                    }, 1000);
                } else {
                    console.error('ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            `;

            log('ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë©”ì¸ ì•± ì½˜ì†”ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”:');
            log(testScript);
        }

        function runComprehensiveTest() {
            log('ğŸ” ì¢…í•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰...');

            const comprehensiveScript = `
                console.log('=== ì¢…í•© ìŠ¤ì™€ì´í”„ ì‹œìŠ¤í…œ ì§„ë‹¨ ===');

                // 1. ì‹œìŠ¤í…œ ìƒíƒœ
                console.log('1. ì‹œìŠ¤í…œ ìƒíƒœ:');
                console.log('- window.ui:', window.ui);
                console.log('- ì´ˆê¸°í™” ìƒíƒœ:', window.ui?.partnerSwiperInitialized);

                // 2. DOM ìš”ì†Œ
                console.log('2. DOM ìš”ì†Œ:');
                const swiper = document.getElementById('mobile-partner-swiper');
                const container = document.getElementById('partner-cards-container');
                const prevBtn = document.getElementById('prev-partner-btn');
                const nextBtn = document.getElementById('next-partner-btn');

                console.log('- ìŠ¤ì™€ì´í¼:', swiper);
                console.log('- ì»¨í…Œì´ë„ˆ:', container);
                console.log('- ì´ì „ ë²„íŠ¼:', prevBtn);
                console.log('- ë‹¤ìŒ ë²„íŠ¼:', nextBtn);

                // 3. ì¹´ë“œ ì •ë³´
                if (container) {
                    const cards = container.querySelectorAll('.partner-card');
                    console.log('3. ì¹´ë“œ ì •ë³´:');
                    console.log('- ì¹´ë“œ ê°œìˆ˜:', cards.length);
                    console.log('- ì»¨í…Œì´ë„ˆ í¬ê¸°:', container.offsetWidth);
                    console.log('- ìŠ¤ì™€ì´í¼ í¬ê¸°:', swiper?.offsetWidth);
                }

                // 4. ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                if (window.ui && nextBtn) {
                    console.log('4. ìë™ í…ŒìŠ¤íŠ¸:');
                    console.log('ë‹¤ìŒ ë²„íŠ¼ í´ë¦­...');
                    nextBtn.click();

                    setTimeout(() => {
                        console.log('ì´ì „ ë²„íŠ¼ í´ë¦­...');
                        prevBtn?.click();
                    }, 1500);
                }

                console.log('=== ì§„ë‹¨ ì™„ë£Œ ===');
            `;

            log('ì¢…í•© í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸:');
            log(comprehensiveScript);
            log('\nğŸ“‹ ì‹¤í–‰ ë°©ë²•:');
            log('1. ë©”ì¸ ì•± ì°½ì„ ì—½ë‹ˆë‹¤ (ìœ„ì˜ "ë©”ì¸ ì•± ì—´ê¸°" ë²„íŠ¼ í´ë¦­)');
            log('2. F12ë¡œ ê°œë°œì ë„êµ¬ë¥¼ ì—½ë‹ˆë‹¤');
            log('3. Console íƒ­ì„ ì„ íƒí•©ë‹ˆë‹¤');
            log('4. ìœ„ì˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê³  ì‹¤í–‰í•©ë‹ˆë‹¤');
        }

        function clearLog() {
            document.getElementById('test-log').textContent = 'ë¡œê·¸ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.\n';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            log('ğŸ”§ ìŠ¤ì™€ì´í”„ ì‹œìŠ¤í…œ ì§„ë‹¨ ë„êµ¬ ì¤€ë¹„ ì™„ë£Œ');
            log('ğŸ“‹ ì‚¬ìš©ë²•: ìœ„ì˜ ë²„íŠ¼ë“¤ì„ ìˆœì„œëŒ€ë¡œ í´ë¦­í•˜ì—¬ ì§„ë‹¨í•˜ì„¸ìš”');

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            document.getElementById('check-system-btn').addEventListener('click', checkSystemStatus);
            document.getElementById('check-dom-btn').addEventListener('click', checkDOMElements);
            document.getElementById('open-app-btn').addEventListener('click', openMainApp);
            document.getElementById('load-frame-btn').addEventListener('click', loadMainAppFrame);
            document.getElementById('swipe-test-btn').addEventListener('click', runSwipeTest);
            document.getElementById('button-test-btn').addEventListener('click', runButtonTest);
            document.getElementById('comprehensive-test-btn').addEventListener('click', runComprehensiveTest);
            document.getElementById('clear-log-btn').addEventListener('click', clearLog);

            log('âœ… ëª¨ë“  ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ì™„ë£Œ');
        });
    </script>
</body>
</html>