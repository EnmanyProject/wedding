# ğŸ”„ Wedding App ì»¨ì…‰ ë³€ê²½ ë° ê¸°ëŠ¥ ì¶”ê°€ ì‘ì—… ì§€ì‹œë¬¸

**ë¬¸ì„œ ë²„ì „**: 1.0.0  
**ì‘ì„±ì¼**: 2025-10-06  
**ëŒ€ìƒ**: Claude Code  
**í”„ë¡œì íŠ¸**: ëˆ„êµ¬ë‚˜ (Wedding App)

---

## ğŸ“‹ ë³€ê²½ ì‚¬í•­ ìš”ì•½

### ğŸ¯ í•µì‹¬ ì»¨ì…‰ ë³€ê²½
**ê¸°ì¡´**: ëˆ„êµ¬ë‚˜ì—ê²Œ í€´ì¦ˆë¥¼ í’€ ìˆ˜ ìˆëŠ” ì˜¤í”ˆ ë§¤ì¹­  
**ë³€ê²½**: **AI ë§¤ì¹­ ê¸°ë°˜ ì¼ì¼ ì¶”ì²œ** + í€´ì¦ˆë¡œ í˜¸ê°ë„ ì¦ê°€

---

## 1ï¸âƒ£ ì£¼ìš” ë³€ê²½ ì‚¬í•­ ìƒì„¸

### A. ë§¤ì¹­ ì‹œìŠ¤í…œ ê°œí¸

#### ê¸°ì¡´ í”Œë¡œìš°
```
ìœ ì € â†’ ëª¨ë“  ì‚¬ëŒ ëª©ë¡ â†’ í€´ì¦ˆ ì„ íƒ â†’ í˜¸ê°ë„ ì¦ê°€
```

#### ìƒˆ í”Œë¡œìš°
```
1. ìœ ì €ê°€ A&B ì„ íƒ (ì·¨í–¥ ë°ì´í„° ìˆ˜ì§‘)
   â†“
2. AI ë§¤ì¹­ ì—”ì§„ì´ ë¶„ì„
   â†’ ì·¨í–¥ ì¼ì¹˜ë„ ê³„ì‚°
   â†’ ë§¤ì¼ ìƒˆë¡œìš´ ì¶”ì²œ ëŒ€ìƒ ì„ ì • (Nëª…)
   â†“
3. ì¹´ë“œ í˜•íƒœë¡œ ì¶”ì²œ ëª©ë¡ ì œê³µ
   â†“
4. ì¹´ë“œ í´ë¦­ â†’ ìƒëŒ€ ì •ë³´ + í€´ì¦ˆ
   â†“
5. í€´ì¦ˆ ì„±ê³µ â†’ í˜¸ê°ë„ ì¦ê°€ â†’ ë” ë§ì€ ì •ë³´ í•´ê¸ˆ
```

---

### B. í™”í ì‹œìŠ¤í…œ: 'ë§(Ring)'

#### ë§ íšë“ ë°©ë²•
- âœ… A&B ì·¨í–¥ ì œê³µ (ìì‹ ì˜ ë°ì´í„° ì œê³µ)
- âœ… ì‚¬ì§„ ì—…ë¡œë“œ ë° ì¸ì¦
- âœ… ê°œì¸ì •ë³´ ì¸ì¦ (ì‹ ë¶„ì¦, ì†Œì…œ ê³„ì • ë“±)
- âœ… ê²°ì œ (ìœ ë£Œ êµ¬ë§¤)
- âœ… ì¶œì„ ì²´í¬ (ë°ì¼ë¦¬ ë¦¬ì›Œë“œ)

#### ë§ ì‚¬ìš© ì²˜
- ğŸ’¸ í€´ì¦ˆ í’€ê¸° (1íšŒë‹¹ Në§)
- ğŸ’¸ ë‹¤ì¸ì› ë°ì´íŠ¸ ì°¸ê°€
- ğŸ’¸ í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ (ì¶”í›„ í™•ì¥)
- ğŸ’¸ ì‚¬ì§„ ì¶”ê°€ í•´ê¸ˆ ê°€ì†í™”

#### ë§ ì• ë‹ˆë©”ì´ì…˜
- **íšë“**: ì½”ì¸ì´ ë‚ ì•„ë“¤ì–´ì˜¤ëŠ” ì• ë‹ˆë©”ì´ì…˜
- **ì‚¬ìš©**: ì½”ì¸ì´ ì‚¬ë¼ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜
- **ì”ì•¡ ë³€í™”**: ìˆ«ì ì¹´ìš´íŠ¸ì—… íš¨ê³¼

---

### C. A&B ì‹œìŠ¤í…œ ê°œí¸

#### ê¸°ì¡´
- í…ìŠ¤íŠ¸ ê¸°ë°˜ ì„ íƒì§€

#### ë³€ê²½
- **AI ìƒì„± ì´ë¯¸ì§€ ê¸°ë°˜**
- ìœ ì €ëŠ” **ì´ë¯¸ì§€ë§Œ ë³´ê³ ** ì„ íƒ
- í…ìŠ¤íŠ¸ ì„¤ëª… ì—†ìŒ (ìˆœìˆ˜ ë¹„ì£¼ì–¼ ì„ íƒ)

#### ë°ì´í„° ë³´ì•ˆ
- **ì•”í˜¸í™” í•„ìˆ˜**: ì·¨í–¥ ë°ì´í„°ëŠ” ë¯¼ê° ì •ë³´
- ì €ì¥: ì•”í˜¸í™”ëœ í˜•íƒœ
- ì „ì†¡: HTTPS + ì¶”ê°€ ì•”í˜¸í™” ë ˆì´ì–´
- ë§¤ì¹­ ì‹œì—ë§Œ ë³µí˜¸í™”

---

### D. ì‚¬ì§„ AI ê²€ì¦ ì‹œìŠ¤í…œ

#### ê²€ì¦ í•­ëª©
1. **ë³¸ì¸ í™•ì¸**
   - ê¸°ì¡´ ì‚¬ì§„ê³¼ ì–¼êµ´ ìœ ì‚¬ë„ ë¹„êµ
   - ì†Œì…œ ê³„ì • í”„ë¡œí•„ ì‚¬ì§„ê³¼ ë¹„êµ

2. **ì½˜í…ì¸  ê²€ì¦**
   - ì™¸ì„¤ì„± ê°ì§€
   - í­ë ¥ì„± ê°ì§€
   - ë¶€ì ì ˆí•œ ì½˜í…ì¸  í•„í„°ë§

3. **ì†Œì…œ ì—°ë™** (ë§ˆì¼ìŠ¤í†¤ ìµœí›„)
   - Facebook, Instagram, Kakao ë“±
   - í”„ë¡œí•„ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
   - ì‚¬ì§„ ìë™ ë™ê¸°í™”

#### ê´€ë¦¬ì ê¸°ëŠ¥
- AI ê²€ì¦ ê²°ê³¼ í™•ì¸
- ìˆ˜ë™ ìŠ¹ì¸/ê±°ë¶€
- ì‚¬ìš©ì ì œì¬ ê´€ë¦¬
- ê²€ì¦ ë¡œê·¸ í™•ì¸

---

## 2ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„

### ìƒˆë¡œìš´ í…Œì´ë¸”

```sql
-- ë§(Ring) ì”ì•¡ ê´€ë¦¬
CREATE TABLE user_ring_balance (
    user_id UUID PRIMARY KEY REFERENCES users(id),
    balance INTEGER NOT NULL DEFAULT 0,
    lifetime_earned INTEGER NOT NULL DEFAULT 0,
    lifetime_spent INTEGER NOT NULL DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ë§ ê±°ë˜ ë¡œê·¸ (ìƒì„¸ ì¶”ì )
CREATE TABLE ring_transactions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    transaction_type VARCHAR(50) NOT NULL, -- 'EARN', 'SPEND', 'REFUND', 'PURCHASE'
    category VARCHAR(50) NOT NULL, -- 'QUIZ', 'PHOTO', 'VERIFICATION', 'AB_SUBMIT', 'PAYMENT', 'GROUP_DATE'
    amount INTEGER NOT NULL, -- ì–‘ìˆ˜: íšë“, ìŒìˆ˜: ì‚¬ìš©
    balance_after INTEGER NOT NULL,
    reference_id UUID, -- ê´€ë ¨ ì—”í‹°í‹° ID (quiz_id, photo_id ë“±)
    metadata JSONB, -- ì¶”ê°€ ì •ë³´
    created_at TIMESTAMPTZ DEFAULT NOW(),
    INDEX idx_user_transactions (user_id, created_at DESC),
    INDEX idx_transaction_type (transaction_type),
    INDEX idx_category (category)
);

-- A&B ì§ˆë¬¸ (AI ìƒì„±, ì´ë¯¸ì§€ ê¸°ë°˜)
CREATE TABLE ab_questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    question_text TEXT NOT NULL, -- AI í”„ë¡¬í”„íŠ¸ìš©
    category VARCHAR(50), -- 'FOOD', 'TRAVEL', 'HOBBY', 'LIFESTYLE' ë“±
    option_a_image_url TEXT NOT NULL, -- A ì˜µì…˜ ì´ë¯¸ì§€
    option_b_image_url TEXT NOT NULL, -- B ì˜µì…˜ ì´ë¯¸ì§€
    option_a_label VARCHAR(100), -- ë‚´ë¶€ ë ˆì´ë¸” (ìœ ì €ì—ê²Œ ë¯¸ë…¸ì¶œ)
    option_b_label VARCHAR(100),
    weight INTEGER DEFAULT 1, -- ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ê°€ì¤‘ì¹˜
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    INDEX idx_category (category),
    INDEX idx_active (is_active)
);

-- ìœ ì € A&B ì‘ë‹µ (ì•”í˜¸í™” ì €ì¥)
CREATE TABLE user_ab_responses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    question_id UUID NOT NULL REFERENCES ab_questions(id),
    selected_option VARCHAR(1) NOT NULL CHECK (selected_option IN ('A', 'B')),
    response_encrypted TEXT NOT NULL, -- ì•”í˜¸í™”ëœ ì‘ë‹µ ë°ì´í„°
    ring_reward INTEGER DEFAULT 0, -- ì´ ì‘ë‹µìœ¼ë¡œ íšë“í•œ ë§
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, question_id),
    INDEX idx_user_responses (user_id)
);

-- ì¼ì¼ ì¶”ì²œ ë§¤ì¹­
CREATE TABLE daily_recommendations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    recommended_user_id UUID NOT NULL REFERENCES users(id),
    match_score DECIMAL(5,2) NOT NULL, -- 0~100 ì ìˆ˜
    matching_traits JSONB, -- ì¼ì¹˜í•˜ëŠ” ì·¨í–¥ ì •ë³´
    recommendation_date DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'PENDING', -- 'PENDING', 'VIEWED', 'QUIZ_STARTED', 'EXPIRED'
    viewed_at TIMESTAMPTZ,
    expires_at TIMESTAMPTZ, -- 24ì‹œê°„ í›„ ë§Œë£Œ
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, recommended_user_id, recommendation_date),
    INDEX idx_user_daily (user_id, recommendation_date),
    INDEX idx_status (status)
);

-- ì‚¬ì§„ AI ê²€ì¦ ë¡œê·¸
CREATE TABLE photo_ai_verification (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    photo_id UUID NOT NULL REFERENCES user_photos(id),
    user_id UUID NOT NULL REFERENCES users(id),
    
    -- ë³¸ì¸ í™•ì¸
    face_similarity_score DECIMAL(5,2), -- ê¸°ì¡´ ì‚¬ì§„ê³¼ ìœ ì‚¬ë„ (0~100)
    is_same_person BOOLEAN,
    
    -- ì½˜í…ì¸  ê²€ì¦
    is_explicit BOOLEAN DEFAULT FALSE,
    is_violent BOOLEAN DEFAULT FALSE,
    content_flags JSONB, -- AIê°€ ê°ì§€í•œ í”Œë˜ê·¸ë“¤
    
    -- ì†Œì…œ ì—°ë™ (í–¥í›„)
    social_profile_match BOOLEAN,
    social_provider VARCHAR(50), -- 'FACEBOOK', 'INSTAGRAM', 'KAKAO'
    social_profile_url TEXT,
    
    -- AI ëª¨ë¸ ì •ë³´
    ai_model_version VARCHAR(50),
    confidence_score DECIMAL(5,2),
    
    -- ìµœì¢… íŒì •
    verification_status VARCHAR(20) DEFAULT 'PENDING', -- 'PENDING', 'APPROVED', 'REJECTED', 'MANUAL_REVIEW'
    admin_reviewed_by UUID REFERENCES users(id),
    admin_review_note TEXT,
    reviewed_at TIMESTAMPTZ,
    
    created_at TIMESTAMPTZ DEFAULT NOW(),
    INDEX idx_photo (photo_id),
    INDEX idx_status (verification_status)
);

-- ì†Œì…œ ê³„ì • ì—°ë™ (ë§ˆì¼ìŠ¤í†¤ ìµœí›„)
CREATE TABLE user_social_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id),
    provider VARCHAR(50) NOT NULL, -- 'FACEBOOK', 'INSTAGRAM', 'KAKAO'
    social_id VARCHAR(255) NOT NULL, -- ì†Œì…œ ê³„ì • ê³ ìœ  ID
    profile_data JSONB, -- í”„ë¡œí•„ ì •ë³´ (ì´ë¦„, ì‚¬ì§„ ë“±)
    access_token_encrypted TEXT, -- ì•”í˜¸í™”ëœ ì•¡ì„¸ìŠ¤ í† í°
    is_verified BOOLEAN DEFAULT FALSE,
    ring_reward_given BOOLEAN DEFAULT FALSE, -- ì—°ë™ ë³´ìƒ ì§€ê¸‰ ì—¬ë¶€
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, provider),
    INDEX idx_user_social (user_id)
);
```

### ê¸°ì¡´ í…Œì´ë¸” ìˆ˜ì •

```sql
-- users í…Œì´ë¸”ì— ì¶”ê°€ ì»¬ëŸ¼
ALTER TABLE users ADD COLUMN IF NOT EXISTS
    ab_completion_rate INTEGER DEFAULT 0, -- A&B ì™„ì„±ë„ (0~100%)
    matching_enabled BOOLEAN DEFAULT FALSE, -- ë§¤ì¹­ í™œì„±í™” (A&B ì¼ì • ê°œìˆ˜ ì´ìƒ ë‹µë³€ ì‹œ)
    daily_recommendation_count INTEGER DEFAULT 5; -- ì¼ì¼ ì¶”ì²œ ë°›ì„ ì¸ì› ìˆ˜

-- user_photos í…Œì´ë¸”ì— AI ê²€ì¦ ìƒíƒœ ì¶”ê°€
ALTER TABLE user_photos ADD COLUMN IF NOT EXISTS
    ai_verification_status VARCHAR(20) DEFAULT 'PENDING', -- 'PENDING', 'VERIFIED', 'REJECTED'
    ai_verified_at TIMESTAMPTZ;
```

---

## 3ï¸âƒ£ API ì—”ë“œí¬ì¸íŠ¸ ì„¤ê³„

### A&B ê´€ë ¨ API

```javascript
// A&B ì§ˆë¬¸ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
GET /api/ab/questions
Response: {
    questions: [
        {
            id: "uuid",
            category: "FOOD",
            optionA: { imageUrl: "...", },
            optionB: { imageUrl: "...", },
            weight: 1
        }
    ],
    userProgress: {
        answered: 12,
        total: 50,
        completionRate: 24
    }
}

// A&B ì‘ë‹µ ì œì¶œ (ë§ íšë“)
POST /api/ab/responses
Body: {
    questionId: "uuid",
    selectedOption: "A" // or "B"
}
Response: {
    success: true,
    ringEarned: 5,
    newBalance: 105,
    completionRate: 26,
    matchingEnabled: false // ì¼ì • ê°œìˆ˜ ì´ìƒ ì‹œ true
}
```

### ë§¤ì¹­ API

```javascript
// ì¼ì¼ ì¶”ì²œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
GET /api/matching/daily-recommendations
Response: {
    recommendations: [
        {
            id: "uuid",
            user: {
                id: "uuid",
                nickname: "í™ê¸¸ë™",
                age: 28,
                profilePhotoUrl: "...", // ë¸”ëŸ¬ ì²˜ë¦¬ëœ ì‚¬ì§„
                blurLevel: "BLUR2"
            },
            matchScore: 87.5,
            matchingTraits: ["ìŒì‹ì·¨í–¥", "ì—¬í–‰ìŠ¤íƒ€ì¼", "ì·¨ë¯¸"],
            affinityScore: 0, // ì•„ì§ í€´ì¦ˆ ì•ˆ í’€ì—ˆìœ¼ë©´ 0
            expiresAt: "2025-10-07T00:00:00Z"
        }
    ],
    nextRefreshAt: "2025-10-07T00:00:00Z"
}

// ì¶”ì²œëœ ìƒëŒ€ ìƒì„¸ ì •ë³´ + í€´ì¦ˆ
GET /api/matching/recommendations/:recommendationId
Response: {
    user: {
        id: "uuid",
        nickname: "í™ê¸¸ë™",
        age: 28,
        bio: "ì•ˆë…•í•˜ì„¸ìš”...", // ì¼ë¶€ë§Œ ë…¸ì¶œ (í˜¸ê°ë„ì— ë”°ë¼)
        photos: [...], // ë¸”ëŸ¬ ì²˜ë¦¬
        visibleInfo: ["age", "location"] // í˜„ì¬ ë³¼ ìˆ˜ ìˆëŠ” ì •ë³´ ëª©ë¡
    },
    matchInfo: {
        matchScore: 87.5,
        matchingTraits: [...]
    },
    affinity: {
        score: 15,
        tier: "LOCKED",
        nextTierThreshold: 20
    },
    quiz: {
        available: true,
        cost: 10, // ë§
        questions: [...] // í€´ì¦ˆ ë¬¸ì œë“¤
    }
}
```

### ë§ ê´€ë ¨ API

```javascript
// ë§ ì”ì•¡ ì¡°íšŒ
GET /api/rings/balance
Response: {
    balance: 150,
    lifetimeEarned: 500,
    lifetimeSpent: 350
}

// ë§ ê±°ë˜ ë‚´ì—­
GET /api/rings/transactions?page=1&limit=20
Response: {
    transactions: [
        {
            id: "uuid",
            type: "EARN",
            category: "AB_SUBMIT",
            amount: 5,
            balanceAfter: 150,
            metadata: { questionId: "..." },
            createdAt: "2025-10-06T10:00:00Z"
        }
    ],
    pagination: { total: 50, page: 1, limit: 20 }
}

// ë§ êµ¬ë§¤ (ê²°ì œ)
POST /api/rings/purchase
Body: {
    packageId: "RING_100", // 100ë§ íŒ¨í‚¤ì§€
    paymentMethod: "CARD"
}
Response: {
    success: true,
    ringsPurchased: 100,
    newBalance: 250,
    transactionId: "uuid"
}
```

### ì‚¬ì§„ AI ê²€ì¦ API

```javascript
// ì‚¬ì§„ ì—…ë¡œë“œ + AI ê²€ì¦ íŠ¸ë¦¬ê±°
POST /api/photos/upload
Body: {
    photoData: "base64...",
    photoType: "PROFILE" // or "ADDITIONAL"
}
Response: {
    photoId: "uuid",
    verificationStatus: "PENDING",
    estimatedTime: "30s",
    ringRewardPending: 20 // ê²€ì¦ í†µê³¼ ì‹œ ì§€ê¸‰ ì˜ˆì •
}

// ì‚¬ì§„ ê²€ì¦ ìƒíƒœ í™•ì¸
GET /api/photos/:photoId/verification
Response: {
    status: "VERIFIED", // or "PENDING", "REJECTED", "MANUAL_REVIEW"
    verificationDetails: {
        faceSimilarity: 92.5,
        isSamePerson: true,
        isExplicit: false,
        confidenceScore: 95.3
    },
    ringRewarded: 20,
    adminNote: null
}
```

### ê´€ë¦¬ì API

```javascript
// AI ê²€ì¦ ëŒ€ê¸° ëª©ë¡
GET /api/admin/photo-verifications?status=MANUAL_REVIEW
Response: {
    items: [
        {
            photoId: "uuid",
            userId: "uuid",
            userName: "í™ê¸¸ë™",
            photoUrl: "...",
            aiResults: {
                faceSimilarity: 65.0, // ë‚®ì•„ì„œ ìˆ˜ë™ ê²€í†  í•„ìš”
                flags: ["LOW_SIMILARITY"]
            },
            uploadedAt: "2025-10-06T10:00:00Z"
        }
    ]
}

// ì‚¬ì§„ ìˆ˜ë™ ìŠ¹ì¸/ê±°ë¶€
POST /api/admin/photo-verifications/:id/review
Body: {
    decision: "APPROVED", // or "REJECTED"
    note: "ìˆ˜ë™ í™•ì¸ ì™„ë£Œ"
}
Response: {
    success: true,
    ringRewarded: true,
    userNotified: true
}

// A&B ì§ˆë¬¸ ê´€ë¦¬
GET /api/admin/ab-questions
POST /api/admin/ab-questions
PUT /api/admin/ab-questions/:id
DELETE /api/admin/ab-questions/:id

// ë§ ê±°ë˜ í†µê³„
GET /api/admin/ring-statistics
Response: {
    totalRingsInCirculation: 50000,
    totalEarnedToday: 5000,
    totalSpentToday: 3000,
    topEarners: [...],
    topSpenders: [...]
}
```

---

## 4ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ë³€ê²½ ì‚¬í•­

### A. ìƒˆë¡œìš´ í™”ë©´

#### 1. A&B ì·¨í–¥ ì„ íƒ í™”ë©´
```html
<!-- /ab-questions.html -->
<div class="ab-question-container">
    <div class="progress-bar">
        <span>12 / 50 ì™„ë£Œ (24%)</span>
    </div>
    
    <div class="question-card">
        <h2 class="question-category">ìŒì‹ ì·¨í–¥</h2>
        
        <div class="options">
            <div class="option-card" data-option="A">
                <img src="option-a-image.jpg" alt="ì˜µì…˜ A">
                <div class="option-overlay">
                    <span class="option-label">A</span>
                </div>
            </div>
            
            <div class="vs-divider">VS</div>
            
            <div class="option-card" data-option="B">
                <img src="option-b-image.jpg" alt="ì˜µì…˜ B">
                <div class="option-overlay">
                    <span class="option-label">B</span>
                </div>
            </div>
        </div>
        
        <div class="reward-info">
            <span>+5 ë§</span> íšë“ ê°€ëŠ¥
        </div>
    </div>
</div>
```

#### 2. ì¼ì¼ ì¶”ì²œ í™”ë©´
```html
<!-- ë©”ì¸ í™”ë©´ì— í†µí•© ë˜ëŠ” ë³„ë„ í˜ì´ì§€ -->
<div class="daily-recommendations">
    <h2>ì˜¤ëŠ˜ì˜ ì¶”ì²œ ğŸ’</h2>
    <p class="refresh-timer">ìƒˆë¡œìš´ ì¶”ì²œê¹Œì§€ <span>4ì‹œê°„ 32ë¶„</span></p>
    
    <div class="recommendation-cards">
        <!-- ì¹´ë“œ ìŠ¤ì™€ì´í”„ ê°€ëŠ¥ -->
        <div class="rec-card" data-user-id="uuid">
            <div class="card-image">
                <img src="blurred-photo.jpg" alt="í”„ë¡œí•„">
                <div class="match-badge">87% ë§¤ì¹˜</div>
            </div>
            
            <div class="card-info">
                <h3>í™ê¸¸ë™, 28</h3>
                <p class="matching-tags">
                    <span class="tag">ğŸ• ìŒì‹ì·¨í–¥</span>
                    <span class="tag">âœˆï¸ ì—¬í–‰ìŠ¤íƒ€ì¼</span>
                    <span class="tag">ğŸ¨ ì·¨ë¯¸</span>
                </p>
                <p class="affinity-status">
                    í˜¸ê°ë„: 0ì  â†’ í€´ì¦ˆë¥¼ í’€ì–´ë³´ì„¸ìš”!
                </p>
            </div>
            
            <button class="view-details-btn">ìì„¸íˆ ë³´ê¸°</button>
        </div>
    </div>
</div>
```

#### 3. ìƒëŒ€ ìƒì„¸ + í€´ì¦ˆ í†µí•© í™”ë©´
```html
<div class="user-detail-quiz-view">
    <!-- ìƒë‹¨: ì‚¬ì§„ + ê¸°ë³¸ ì •ë³´ -->
    <div class="user-profile-section">
        <div class="photo-gallery">
            <!-- í˜¸ê°ë„ì— ë”°ë¼ ë¸”ëŸ¬ í•´ì œ -->
            <img src="photo-blur2.jpg" class="main-photo">
        </div>
        
        <div class="basic-info">
            <h2>í™ê¸¸ë™, 28</h2>
            <p class="location">ğŸŒ ì„œìš¸, ê°•ë‚¨êµ¬</p>
            <p class="bio locked">
                ğŸ”’ í˜¸ê°ë„ 20ì  ì´ìƒ í•„ìš”
            </p>
        </div>
        
        <div class="affinity-progress">
            <div class="progress-bar">
                <div class="fill" style="width: 15%"></div>
            </div>
            <p>í˜¸ê°ë„ 15ì  / 20ì  (ë‹¤ìŒ ë‹¨ê³„ê¹Œì§€)</p>
        </div>
    </div>
    
    <!-- í•˜ë‹¨: í€´ì¦ˆ ì„¹ì…˜ -->
    <div class="quiz-section">
        <div class="quiz-info">
            <h3>í€´ì¦ˆë¡œ í˜¸ê°ë„ ë†’ì´ê¸°</h3>
            <p class="cost">ğŸ’ 10 ë§ ì†Œëª¨</p>
        </div>
        
        <button class="start-quiz-btn">í€´ì¦ˆ ì‹œì‘í•˜ê¸°</button>
    </div>
</div>
```

### B. ë§ ì• ë‹ˆë©”ì´ì…˜ ì‹œìŠ¤í…œ

```javascript
// public/js/ring-animation.js
class RingAnimationManager {
    /**
     * ë§ íšë“ ì• ë‹ˆë©”ì´ì…˜
     */
    showEarnAnimation(amount, targetElement) {
        // í™”ë©´ ì—¬ëŸ¬ ê³³ì—ì„œ ì½”ì¸ì´ ë‚ ì•„ì™€ í•©ì³ì§€ëŠ” íš¨ê³¼
        // Lottie ë˜ëŠ” CSS ì• ë‹ˆë©”ì´ì…˜ ì‚¬ìš©
    }
    
    /**
     * ë§ ì‚¬ìš© ì• ë‹ˆë©”ì´ì…˜
     */
    showSpendAnimation(amount, sourceElement) {
        // ì½”ì¸ì´ í©ì–´ì§€ë©° ì‚¬ë¼ì§€ëŠ” íš¨ê³¼
    }
    
    /**
     * ì”ì•¡ ìˆ«ì ì¹´ìš´íŠ¸ì—… íš¨ê³¼
     */
    animateBalanceChange(from, to, duration = 1000) {
        // ìˆ«ìê°€ ë¶€ë“œëŸ½ê²Œ ì¦ê°€/ê°ì†Œ
    }
}
```

### C. UI ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

```javascript
// public/js/ui.js ìˆ˜ì • í•„ìš” ë¶€ë¶„

// 1. ë©”ì¸ í™”ë©´ì— ì¼ì¼ ì¶”ì²œ ì„¹ì…˜ ì¶”ê°€
function renderDailyRecommendations(recommendations) {
    // ì¹´ë“œ í˜•íƒœë¡œ ë Œë”ë§
    // ìŠ¤ì™€ì´í”„ ê°€ëŠ¥í•˜ê²Œ MobileSwiper í™œìš©
}

// 2. ë§ ì”ì•¡ í‘œì‹œ (í—¤ë”ì— í•­ìƒ í‘œì‹œ)
function updateRingBalance(balance) {
    const ringDisplay = document.querySelector('.ring-balance');
    ringDisplay.textContent = balance;
    // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
}

// 3. A&B ì§ˆë¬¸ ë Œë”ë§
function renderABQuestion(question) {
    // ì´ë¯¸ì§€ ê¸°ë°˜ ì˜µì…˜ í‘œì‹œ
    // ì„ íƒ ì‹œ ì¦‰ì‹œ ì œì¶œ ë° ë§ íšë“ ì• ë‹ˆë©”ì´ì…˜
}

// 4. ìƒëŒ€ ìƒì„¸ + í€´ì¦ˆ í†µí•© ë·°
function renderUserDetailWithQuiz(userData, quizData) {
    // í˜¸ê°ë„ì— ë”°ë¥¸ ì •ë³´ ë…¸ì¶œ ì œì–´
    // í€´ì¦ˆ ì‹œì‘ ë²„íŠ¼
}
```

---

## 5ï¸âƒ£ ë°±ì—”ë“œ ë¡œì§ êµ¬í˜„

### A. ë§¤ì¹­ ì—”ì§„ (ë§¤ì¼ ìƒˆë¡œìš´ ì¶”ì²œ ìƒì„±)

```javascript
// server/services/matching-engine.js

class MatchingEngine {
    /**
     * ë§¤ì¼ ìì •ì— ì‹¤í–‰ë˜ëŠ” ë°°ì¹˜ ì‘ì—…
     * ëª¨ë“  í™œì„± ìœ ì €ì—ê²Œ ì¶”ì²œ ìƒì„±
     */
    async generateDailyRecommendations() {
        const activeUsers = await this.getActiveUsers();
        
        for (const user of activeUsers) {
            const recommendations = await this.findMatches(user);
            await this.saveRecommendations(user.id, recommendations);
        }
    }
    
    /**
     * ê°œë³„ ìœ ì €ì—ê²Œ ë§¤ì¹­ ëŒ€ìƒ ì°¾ê¸°
     */
    async findMatches(user) {
        // 1. ìœ ì €ì˜ A&B ì‘ë‹µ ê°€ì ¸ì˜¤ê¸°
        const userResponses = await this.getUserABResponses(user.id);
        
        // 2. ë‹¤ë¥¸ ìœ ì €ë“¤ê³¼ ë§¤ì¹­ ìŠ¤ì½”ì–´ ê³„ì‚°
        const candidates = await this.getAllCandidates(user.id);
        const scored = candidates.map(candidate => ({
            ...candidate,
            matchScore: this.calculateMatchScore(userResponses, candidate.responses)
        }));
        
        // 3. ìƒìœ„ Nëª… ì„ ì • (ê¸°ë³¸ 5ëª…)
        const topMatches = scored
            .sort((a, b) => b.matchScore - a.matchScore)
            .slice(0, user.dailyRecommendationCount || 5);
        
        return topMatches;
    }
    
    /**
     * ë§¤ì¹­ ìŠ¤ì½”ì–´ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜
     */
    calculateMatchScore(userA, userB) {
        let matchCount = 0;
        let totalWeight = 0;
        
        for (const [questionId, responseA] of Object.entries(userA)) {
            const responseB = userB[questionId];
            if (!responseB) continue;
            
            const question = this.questions[questionId];
            totalWeight += question.weight;
            
            if (responseA === responseB) {
                matchCount += question.weight;
            }
        }
        
        return totalWeight > 0 ? (matchCount / totalWeight) * 100 : 0;
    }
}

// Cron job ì„¤ì •
const cron = require('node-cron');

// ë§¤ì¼ ìì •ì— ì‹¤í–‰
cron.schedule('0 0 * * *', async () => {
    console.log('Generating daily recommendations...');
    await matchingEngine.generateDailyRecommendations();
});
```

### B. ë§ ê±°ë˜ ì„œë¹„ìŠ¤

```javascript
// server/services/ring-service.js

class RingService {
    /**
     * ë§ íšë“ ì²˜ë¦¬
     */
    async earnRings(userId, amount, category, metadata = {}) {
        const tx = await db.transaction();
        
        try {
            // 1. ì”ì•¡ ì—…ë°ì´íŠ¸
            const balance = await tx('user_ring_balance')
                .where({ user_id: userId })
                .increment('balance', amount)
                .increment('lifetime_earned', amount)
                .returning('balance');
            
            // 2. ê±°ë˜ ë¡œê·¸ ê¸°ë¡
            await tx('ring_transactions').insert({
                user_id: userId,
                transaction_type: 'EARN',
                category,
                amount,
                balance_after: balance[0].balance,
                metadata
            });
            
            await tx.commit();
            
            return {
                success: true,
                newBalance: balance[0].balance,
                amountEarned: amount
            };
        } catch (error) {
            await tx.rollback();
            throw error;
        }
    }
    
    /**
     * ë§ ì‚¬ìš© ì²˜ë¦¬ (ì”ì•¡ ë¶€ì¡± ì‹œ ì‹¤íŒ¨)
     */
    async spendRings(userId, amount, category, metadata = {}) {
        const tx = await db.transaction();
        
        try {
            // 1. ì”ì•¡ í™•ì¸
            const currentBalance = await tx('user_ring_balance')
                .where({ user_id: userId })
                .first();
            
            if (currentBalance.balance < amount) {
                throw new Error('INSUFFICIENT_RINGS');
            }
            
            // 2. ì”ì•¡ ì°¨ê°
            const balance = await tx('user_ring_balance')
                .where({ user_id: userId })
                .decrement('balance', amount)
                .increment('lifetime_spent', amount)
                .returning('balance');
            
            // 3. ê±°ë˜ ë¡œê·¸ ê¸°ë¡
            await tx('ring_transactions').insert({
                user_id: userId,
                transaction_type: 'SPEND',
                category,
                amount: -amount, // ìŒìˆ˜ë¡œ ì €ì¥
                balance_after: balance[0].balance,
                metadata
            });
            
            await tx.commit();
            
            return {
                success: true,
                newBalance: balance[0].balance,
                amountSpent: amount
            };
        } catch (error) {
            await tx.rollback();
            throw error;
        }
    }
}
```

### C. A&B ì‘ë‹µ ì•”í˜¸í™”

```javascript
// server/services/encryption-service.js
const crypto = require('crypto');

class EncryptionService {
    constructor() {
        this.algorithm = 'aes-256-gcm';
        this.key = Buffer.from(process.env.ENCRYPTION_KEY, 'hex'); // 32 bytes
    }
    
    /**
     * A&B ì‘ë‹µ ì•”í˜¸í™”
     */
    encryptResponse(data) {
        const iv = crypto.randomBytes(16);
        const cipher = crypto.createCipheriv(this.algorithm, this.key, iv);
        
        let encrypted = cipher.update(JSON.stringify(data), 'utf8', 'hex');
        encrypted += cipher.final('hex');
        
        const authTag = cipher.getAuthTag();
        
        return {
            encrypted,
            iv: iv.toString('hex'),
            authTag: authTag.toString('hex')
        };
    }
    
    /**
     * A&B ì‘ë‹µ ë³µí˜¸í™”
     */
    decryptResponse(encryptedData) {
        const decipher = crypto.createDecipheriv(
            this.algorithm,
            this.key,
            Buffer.from(encryptedData.iv, 'hex')
        );
        
        decipher.setAuthTag(Buffer.from(encryptedData.authTag, 'hex'));
        
        let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
        decrypted += decipher.final('utf8');
        
        return JSON.parse(decrypted);
    }
}
```

### D. ì‚¬ì§„ AI ê²€ì¦ ì„œë¹„ìŠ¤ (ìŠ¤ì¼ˆë ˆí†¤)

```javascript
// server/services/photo-ai-service.js

class PhotoAIService {
    /**
     * ì‚¬ì§„ ê²€ì¦ íŒŒì´í”„ë¼ì¸
     */
    async verifyPhoto(photoId, userId) {
        const photo = await this.getPhoto(photoId);
        
        // 1. ì–¼êµ´ ìœ ì‚¬ë„ ê²€ì¦
        const similarityResult = await this.checkFaceSimilarity(userId, photo);
        
        // 2. ì½˜í…ì¸  ê²€ì¦ (ì™¸ì„¤ì„±, í­ë ¥ì„±)
        const contentResult = await this.checkContent(photo);
        
        // 3. ì†Œì…œ í”„ë¡œí•„ ë§¤ì¹­ (ì˜µì…˜)
        let socialResult = null;
        if (await this.hasSocialAccount(userId)) {
            socialResult = await this.verifySocialProfile(userId, photo);
        }
        
        // 4. ì¢…í•© íŒì •
        const verification = this.makeDecision({
            similarity: similarityResult,
            content: contentResult,
            social: socialResult
        });
        
        // 5. DBì— ì €ì¥
        await this.saveVerificationResult(photoId, verification);
        
        // 6. ìë™ ìŠ¹ì¸ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨
        if (verification.autoApprove) {
            await this.approvePhoto(photoId);
            await ringService.earnRings(userId, 20, 'PHOTO', { photoId });
        } else {
            await this.requestManualReview(photoId);
        }
        
        return verification;
    }
    
    /**
     * ì–¼êµ´ ìœ ì‚¬ë„ ì²´í¬ (ê¸°ì¡´ ì‚¬ì§„ê³¼ ë¹„êµ)
     * TODO: AWS Rekognition ë˜ëŠ” Azure Face API ì—°ë™
     */
    async checkFaceSimilarity(userId, newPhoto) {
        // ìŠ¤ì¼ˆë ˆí†¤ êµ¬í˜„
        return {
            score: 85.0,
            isSamePerson: true,
            confidence: 90.0
        };
    }
    
    /**
     * ì½˜í…ì¸  ê²€ì¦ (ì™¸ì„¤ì„±, í­ë ¥ì„±)
     * TODO: Google Cloud Vision API ë˜ëŠ” AWS Rekognition
     */
    async checkContent(photo) {
        // ìŠ¤ì¼ˆë ˆí†¤ êµ¬í˜„
        return {
            isExplicit: false,
            isViolent: false,
            flags: [],
            confidence: 95.0
        };
    }
    
    /**
     * ì¢…í•© íŒì •
     */
    makeDecision(results) {
        const { similarity, content, social } = results;
        
        // ìë™ ìŠ¹ì¸ ì¡°ê±´
        const autoApprove = 
            similarity.isSamePerson &&
            similarity.score >= 80 &&
            !content.isExplicit &&
            !content.isViolent &&
            content.confidence >= 90;
        
        return {
            autoApprove,
            status: autoApprove ? 'VERIFIED' : 'MANUAL_REVIEW',
            details: results
        };
    }
}
```

---

## 6ï¸âƒ£ ê´€ë¦¬ì í˜ì´ì§€ í™•ì¥

### ìƒˆë¡œìš´ ê´€ë¦¬ì ê¸°ëŠ¥

```javascript
// public/admin.html í™•ì¥

// 1. A&B ì§ˆë¬¸ ê´€ë¦¬
<section id="ab-management">
    <h2>A&B ì§ˆë¬¸ ê´€ë¦¬</h2>
    
    <button id="generate-ai-questions">AIë¡œ ìƒˆ ì§ˆë¬¸ ìƒì„±</button>
    
    <table class="ab-questions-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>ì¹´í…Œê³ ë¦¬</th>
                <th>ì˜µì…˜ A</th>
                <th>ì˜µì…˜ B</th>
                <th>ê°€ì¤‘ì¹˜</th>
                <th>í™œì„±í™”</th>
                <th>ì‘ì—…</th>
            </tr>
        </thead>
        <tbody>
            <!-- ë™ì  ë Œë”ë§ -->
        </tbody>
    </table>
</section>

// 2. ì‚¬ì§„ AI ê²€ì¦ ê´€ë¦¬
<section id="photo-verification-queue">
    <h2>ì‚¬ì§„ ê²€ì¦ ëŒ€ê¸°ì—´</h2>
    
    <div class="filters">
        <button data-status="MANUAL_REVIEW">ìˆ˜ë™ ê²€í†  í•„ìš”</button>
        <button data-status="PENDING">ê²€ì¦ ì¤‘</button>
        <button data-status="REJECTED">ê±°ë¶€ë¨</button>
    </div>
    
    <div class="verification-items">
        <!-- ê° ì‚¬ì§„ë³„ ì¹´ë“œ -->
        <div class="verification-card">
            <img src="photo.jpg">
            <div class="ai-results">
                <p>ì–¼êµ´ ìœ ì‚¬ë„: <strong>92.5%</strong></p>
                <p>ì™¸ì„¤ì„±: <strong class="safe">ì•ˆì „</strong></p>
                <p>ì‹ ë¢°ë„: <strong>95.3%</strong></p>
            </div>
            <div class="actions">
                <button class="approve-btn">ìŠ¹ì¸</button>
                <button class="reject-btn">ê±°ë¶€</button>
            </div>
        </div>
    </div>
</section>

// 3. ë§ í†µê³„ ëŒ€ì‹œë³´ë“œ
<section id="ring-statistics">
    <h2>ë§ ê²½ì œ í†µê³„</h2>
    
    <div class="stat-cards">
        <div class="stat-card">
            <h3>ì´ ìœ í†µëŸ‰</h3>
            <p class="big-number">50,000 ë§</p>
        </div>
        <div class="stat-card">
            <h3>ì˜¤ëŠ˜ íšë“</h3>
            <p class="big-number">5,000 ë§</p>
        </div>
        <div class="stat-card">
            <h3>ì˜¤ëŠ˜ ì‚¬ìš©</h3>
            <p class="big-number">3,000 ë§</p>
        </div>
    </div>
    
    <canvas id="ring-chart"></canvas> <!-- Chart.js ê·¸ë˜í”„ -->
</section>

// 4. ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ëª¨ë‹ˆí„°ë§
<section id="matching-monitoring">
    <h2>ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ í˜„í™©</h2>
    
    <div class="matching-stats">
        <p>ì˜¤ëŠ˜ ìƒì„±ëœ ì¶”ì²œ: <strong>1,234ê°œ</strong></p>
        <p>í‰ê·  ë§¤ì¹­ ìŠ¤ì½”ì–´: <strong>76.5%</strong></p>
        <p>í€´ì¦ˆ ì‹œì‘ë¥ : <strong>45%</strong></p>
    </div>
    
    <button id="run-matching-manually">ìˆ˜ë™ ë§¤ì¹­ ì‹¤í–‰</button>
</section>
```

---

## 7ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

```bash
# .env íŒŒì¼ì— ì¶”ê°€

# ì•”í˜¸í™” í‚¤ (32 bytes hex)
ENCRYPTION_KEY=your-32-byte-hex-key-here

# ë§ ê´€ë ¨ ì„¤ì •
RING_AB_REWARD=5          # A&B ì‘ë‹µ ì‹œ íšë“
RING_PHOTO_REWARD=20      # ì‚¬ì§„ ì¸ì¦ ì‹œ íšë“
RING_VERIFICATION_REWARD=30  # ì‹ ë¶„ ì¸ì¦ ì‹œ íšë“
RING_QUIZ_COST=10         # í€´ì¦ˆ 1íšŒ ë¹„ìš©
RING_GROUP_DATE_COST=50   # ë‹¤ì¸ì› ë°ì´íŠ¸ ì°¸ê°€ ë¹„ìš©

# AI ì„œë¹„ìŠ¤ (ì¶”í›„ ì„¤ì •)
AWS_REKOGNITION_KEY=...
GOOGLE_VISION_API_KEY=...
AZURE_FACE_API_KEY=...

# ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜
DAILY_RECOMMENDATION_COUNT=5  # ê¸°ë³¸ ì¼ì¼ ì¶”ì²œ ì¸ì›
MATCHING_CRON_SCHEDULE="0 0 * * *"  # ë§¤ì¼ ìì •
```

---

## 8ï¸âƒ£ ë§ˆì¼ìŠ¤í†¤ ë° ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ ì‹œìŠ¤í…œ êµ¬ì¶• (ìš°ì„ ìˆœìœ„ ë†’ìŒ)

#### Week 1-2
- [ ] DB ìŠ¤í‚¤ë§ˆ ìƒì„± ë° ë§ˆì´ê·¸ë ˆì´ì…˜
  - `user_ring_balance`, `ring_transactions`
  - `ab_questions`, `user_ab_responses`
  - `daily_recommendations`
- [ ] ë§ ì‹œìŠ¤í…œ êµ¬í˜„
  - íšë“/ì‚¬ìš© ë¡œì§
  - ê±°ë˜ ë¡œê·¸ ê¸°ë¡
  - í”„ë¡ íŠ¸ì—”ë“œ ì• ë‹ˆë©”ì´ì…˜
- [ ] A&B ì§ˆë¬¸ ì‹œìŠ¤í…œ
  - ì´ë¯¸ì§€ ê¸°ë°˜ UI
  - ì‘ë‹µ ì•”í˜¸í™” ì €ì¥
  - ì™„ì„±ë„ ê³„ì‚°

#### Week 3-4
- [ ] ë§¤ì¹­ ì—”ì§„ êµ¬í˜„
  - ë§¤ì¹­ ìŠ¤ì½”ì–´ ì•Œê³ ë¦¬ì¦˜
  - ì¼ì¼ ì¶”ì²œ ìƒì„± ë°°ì¹˜
  - ì¶”ì²œ ëª©ë¡ API
- [ ] í”„ë¡ íŠ¸ì—”ë“œ UI
  - A&B ì§ˆë¬¸ í™”ë©´
  - ì¼ì¼ ì¶”ì²œ ì¹´ë“œ
  - ìƒëŒ€ ìƒì„¸ + í€´ì¦ˆ í†µí•© ë·°
- [ ] ê¸°ì¡´ í€´ì¦ˆ ì‹œìŠ¤í…œê³¼ í†µí•©
  - ì¶”ì²œëœ ìƒëŒ€ë§Œ í€´ì¦ˆ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½
  - í˜¸ê°ë„ ì‹œìŠ¤í…œ ì—°ë™

### Phase 2: AI ê²€ì¦ ë° ê´€ë¦¬ì (ì¤‘ê°„ ìš°ì„ ìˆœìœ„)

#### Week 5-6
- [ ] ì‚¬ì§„ AI ê²€ì¦ ìŠ¤ì¼ˆë ˆí†¤
  - DB ìŠ¤í‚¤ë§ˆ (`photo_ai_verification`)
  - ê¸°ë³¸ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
  - ìˆ˜ë™ ê²€í†  ì‹œìŠ¤í…œ
- [ ] ê´€ë¦¬ì í˜ì´ì§€ í™•ì¥
  - A&B ì§ˆë¬¸ ê´€ë¦¬
  - ì‚¬ì§„ ê²€ì¦ í
  - ë§ í†µê³„ ëŒ€ì‹œë³´ë“œ
  - ë§¤ì¹­ ëª¨ë‹ˆí„°ë§

### Phase 3: AI ì—”ì§„ ì—°ë™ (ë§ˆì¼ìŠ¤í†¤ ìµœí›„)

#### Week 7-8
- [ ] AI ì„œë¹„ìŠ¤ ì—°ë™
  - AWS Rekognition (ì–¼êµ´ ì¸ì‹)
  - Google Vision API (ì½˜í…ì¸  ê²€ì¦)
- [ ] A&B ì§ˆë¬¸ AI ìƒì„±
  - OpenAI DALL-E ë˜ëŠ” Midjourney API
  - ì¹´í…Œê³ ë¦¬ë³„ ìë™ ìƒì„±
- [ ] ì†Œì…œ ê³„ì • ì—°ë™
  - OAuth ì¸ì¦ (Facebook, Instagram, Kakao)
  - í”„ë¡œí•„ ì •ë³´ ë™ê¸°í™”
  - ì‚¬ì§„ ìë™ ê²€ì¦

### Phase 4: ìµœì í™” ë° í…ŒìŠ¤íŠ¸

#### Week 9-10
- [ ] ì„±ëŠ¥ ìµœì í™”
  - ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ íŠœë‹
  - DB ì¸ë±ìŠ¤ ìµœì í™”
  - ìºì‹± ì „ëµ
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
  - ìœ ë‹› í…ŒìŠ¤íŠ¸ (Jest)
  - API í†µí•© í…ŒìŠ¤íŠ¸
  - E2E í…ŒìŠ¤íŠ¸ (Playwright)
- [ ] ë³´ì•ˆ ê°•í™”
  - ì·¨ì•½ì  ìŠ¤ìº”
  - ì•”í˜¸í™” ê²€ì¦
  - Rate limiting

---

## 9ï¸âƒ£ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ê°€ì´ë“œ

### ë³€ê²½ì´ í•„ìš”í•œ ì£¼ìš” íŒŒì¼

#### 1. `server/index.js` (ë°±ì—”ë“œ)
```javascript
// ì¶”ê°€í•  ë¼ìš°í„°
const abRouter = require('./routes/ab');
const matchingRouter = require('./routes/matching');
const ringRouter = require('./routes/rings');
const photoAIRouter = require('./routes/photo-ai');

app.use('/api/ab', abRouter);
app.use('/api/matching', matchingRouter);
app.use('/api/rings', ringRouter);
app.use('/api/photos', photoAIRouter);

// Cron job ì´ˆê¸°í™”
require('./jobs/daily-matching-job');
```

#### 2. `public/js/ui.js` (í”„ë¡ íŠ¸ì—”ë“œ)
```javascript
// ë©”ì¸ í™”ë©´ ìˆ˜ì •
async function renderMainScreen() {
    // ê¸°ì¡´: ëª¨ë“  íŒŒíŠ¸ë„ˆ ëª©ë¡
    // ë³€ê²½: ì¼ì¼ ì¶”ì²œ ëª©ë¡
    
    const recommendations = await API.getDailyRecommendations();
    renderDailyRecommendations(recommendations);
}

// ë§ ì”ì•¡ í—¤ë”ì— í‘œì‹œ
async function initializeApp() {
    const ringBalance = await API.getRingBalance();
    updateRingBalanceDisplay(ringBalance);
}
```

#### 3. `public/js/api.js` (API í´ë¼ì´ì–¸íŠ¸)
```javascript
// ìƒˆë¡œìš´ API ë©”ì„œë“œ ì¶”ê°€
class API {
    // A&B
    static async getABQuestions() { ... }
    static async submitABResponse(questionId, option) { ... }
    
    // ë§¤ì¹­
    static async getDailyRecommendations() { ... }
    static async getRecommendationDetail(recId) { ... }
    
    // ë§
    static async getRingBalance() { ... }
    static async getRingTransactions(page) { ... }
    static async purchaseRings(packageId) { ... }
    
    // ì‚¬ì§„ AI
    static async getPhotoVerificationStatus(photoId) { ... }
}
```

#### 4. `public/js/quiz.js` (í€´ì¦ˆ ì‹œìŠ¤í…œ)
```javascript
// ìˆ˜ì •: í€´ì¦ˆ ì‹œì‘ ì „ ë§ ì°¨ê°
async function startQuiz(targetUserId) {
    // 1. ë§ ì”ì•¡ í™•ì¸
    const balance = await API.getRingBalance();
    if (balance < RING_QUIZ_COST) {
        showInsufficientRingsModal();
        return;
    }
    
    // 2. ë§ ì°¨ê°
    await API.spendRings(RING_QUIZ_COST, 'QUIZ', { targetUserId });
    
    // 3. ê¸°ì¡´ í€´ì¦ˆ ë¡œì§
    ...
}
```

---

## ğŸ”Ÿ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ìœ ì € í”Œë¡œìš° í…ŒìŠ¤íŠ¸

```
1. ì‹ ê·œ ê°€ì…
   â†’ A&B ì§ˆë¬¸ 20ê°œ ì´ìƒ ë‹µë³€ (100ë§ íšë“)
   â†’ ë§¤ì¹­ í™œì„±í™”
   
2. ë‹¤ìŒë‚ 
   â†’ ì¼ì¼ ì¶”ì²œ 5ëª… í™•ì¸
   â†’ ì¹´ë“œ í´ë¦­í•˜ì—¬ ìƒì„¸ ë³´ê¸°
   
3. í€´ì¦ˆ í’€ê¸°
   â†’ ë§ 10ê°œ ì°¨ê°
   â†’ ì •ë‹µ ì‹œ í˜¸ê°ë„ ì¦ê°€
   â†’ ì˜¤ë‹µ ì‹œ ì¶”ê°€ ë§ íŒ¨ë„í‹°
   
4. í˜¸ê°ë„ 20ì  ë„ë‹¬
   â†’ ì‚¬ì§„ BLUR2 â†’ BLUR1 í•´ê¸ˆ
   â†’ ì¶”ê°€ ì •ë³´ ë…¸ì¶œ
   
5. í˜¸ê°ë„ 60ì  ë„ë‹¬
   â†’ ì›ë³¸ ì‚¬ì§„ í•´ê¸ˆ
   â†’ ë§Œë‚¨ ì‹ ì²­ ê°€ëŠ¥
   
6. ì‚¬ì§„ ì—…ë¡œë“œ
   â†’ AI ê²€ì¦ ëŒ€ê¸° (30ì´ˆ)
   â†’ ìŠ¹ì¸ ì‹œ 20ë§ íšë“
   
7. ê´€ë¦¬ì
   â†’ ìˆ˜ë™ ê²€í†  í•„ìš” ì‚¬ì§„ ì²˜ë¦¬
   â†’ ë§ í†µê³„ í™•ì¸
   â†’ ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜ ëª¨ë‹ˆí„°ë§
```

---

## ğŸ“ Claude Code ì‘ì—… ì§€ì‹œë¬¸ ìš”ì•½

### ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥í•œ ì‘ì—… (Phase 1)

```markdown
# Task 1: DB ìŠ¤í‚¤ë§ˆ ìƒì„±
- `user_ring_balance`, `ring_transactions` í…Œì´ë¸” ìƒì„±
- `ab_questions`, `user_ab_responses` í…Œì´ë¸” ìƒì„± (ì•”í˜¸í™” ì»¬ëŸ¼ í¬í•¨)
- `daily_recommendations` í…Œì´ë¸” ìƒì„±
- ê¸°ì¡´ í…Œì´ë¸”ì— ì»¬ëŸ¼ ì¶”ê°€ (users, user_photos)
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

# Task 2: ë§ ì‹œìŠ¤í…œ ë°±ì—”ë“œ
- `server/services/ring-service.js` ìƒì„±
  - earnRings(), spendRings() ë©”ì„œë“œ
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- `server/routes/rings.js` API ì—”ë“œí¬ì¸íŠ¸
  - GET /balance
  - GET /transactions
  - POST /purchase
- í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)

# Task 3: ë§ ì‹œìŠ¤í…œ í”„ë¡ íŠ¸ì—”ë“œ
- `public/js/ring-animation.js` ìƒì„±
  - íšë“/ì‚¬ìš© ì• ë‹ˆë©”ì´ì…˜
  - ì”ì•¡ ì¹´ìš´íŠ¸ì—… íš¨ê³¼
- í—¤ë”ì— ë§ ì”ì•¡ í‘œì‹œ UI
- `public/styles/ring-ui.css` ìŠ¤íƒ€ì¼

# Task 4: A&B ì‹œìŠ¤í…œ ë°±ì—”ë“œ
- `server/services/encryption-service.js` ì•”í˜¸í™” ì„œë¹„ìŠ¤
- `server/routes/ab.js` API ì—”ë“œí¬ì¸íŠ¸
  - GET /questions
  - POST /responses
- ì‘ë‹µ ì €ì¥ ì‹œ ì•”í˜¸í™” ë¡œì§

# Task 5: A&B ì‹œìŠ¤í…œ í”„ë¡ íŠ¸ì—”ë“œ
- `public/ab-questions.html` í˜ì´ì§€ ìƒì„±
- `public/js/ab-ui.js` ë¡œì§
  - ì´ë¯¸ì§€ ê¸°ë°˜ ì„ íƒ UI
  - ì§„í–‰ë„ í‘œì‹œ
  - ë§ íšë“ ì• ë‹ˆë©”ì´ì…˜ ì—°ë™
- `public/styles/ab-questions.css` ìŠ¤íƒ€ì¼

# Task 6: ë§¤ì¹­ ì—”ì§„
- `server/services/matching-engine.js` ìƒì„±
  - calculateMatchScore() ì•Œê³ ë¦¬ì¦˜
  - findMatches() ë¡œì§
  - generateDailyRecommendations() ë°°ì¹˜
- `server/jobs/daily-matching-job.js` Cron job
- `server/routes/matching.js` API

# Task 7: ì¼ì¼ ì¶”ì²œ UI
- ë©”ì¸ í™”ë©´ì— ì¶”ì²œ ì„¹ì…˜ ì¶”ê°€
- ì¹´ë“œ í˜•íƒœ ë””ìì¸ (ìŠ¤ì™€ì´í”„ ê°€ëŠ¥)
- ë§¤ì¹­ ìŠ¤ì½”ì–´ í‘œì‹œ
- `public/js/ui.js` ìˆ˜ì •

# Task 8: í€´ì¦ˆ ì‹œìŠ¤í…œ í†µí•©
- ê¸°ì¡´ quiz.js ìˆ˜ì •
  - ë§ ì°¨ê° ë¡œì§ ì¶”ê°€
  - ì¶”ì²œëœ ìƒëŒ€ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë³€ê²½
- UI ìˆ˜ì • (ìƒëŒ€ ìƒì„¸ + í€´ì¦ˆ í†µí•© ë·°)
```

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹œì‘ ì „ ì¤€ë¹„
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)
- [ ] ì•”í˜¸í™” í‚¤ ìƒì„± (`openssl rand -hex 32`)
- [ ] Git ë¸Œëœì¹˜ ìƒì„± (`feature/ring-matching-system`)

### êµ¬í˜„ ì¤‘
- [ ] ê° Taskë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] API ì—”ë“œí¬ì¸íŠ¸ Postman í…ŒìŠ¤íŠ¸
- [ ] UI ì»´í¬ë„ŒíŠ¸ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸ (README.md, PROJECT.md)

### ì™„ë£Œ í›„
- [ ] ì „ì²´ í”Œë¡œìš° E2E í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ (ë§¤ì¹­ ì•Œê³ ë¦¬ì¦˜)
- [ ] ë³´ì•ˆ ê²€í†  (ì•”í˜¸í™”, ì¸ì¦)
- [ ] ì½”ë“œ ë¦¬ë·°

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê¸°ì¡´ í”„ë¡œì íŠ¸ ë¬¸ì„œ
- `PROJECT.md` - í”„ë¡œì íŠ¸ í—Œë²• (í•µì‹¬ ì •ë³´)
- `MASTER.md` - í˜„ì¬ ì‘ì—… ìƒíƒœ
- `README.md` - ê°œë°œì ê°€ì´ë“œ
- `CLAUDE.md` - ë²„ì „ íˆìŠ¤í† ë¦¬

### ì™¸ë¶€ API ë¬¸ì„œ
- AWS Rekognition: https://docs.aws.amazon.com/rekognition/
- Google Cloud Vision: https://cloud.google.com/vision/docs
- OpenAI DALL-E: https://platform.openai.com/docs/guides/images

### ë¼ì´ë¸ŒëŸ¬ë¦¬
- node-cron: https://www.npmjs.com/package/node-cron
- crypto (Node.js): https://nodejs.org/api/crypto.html
- Lottie: https://airbnb.io/lottie/ (ì• ë‹ˆë©”ì´ì…˜)

---

**ì‘ì„± ì™„ë£Œ!** ì´ ë¬¸ì„œë¥¼ Claude Codeì—ê²Œ ì „ë‹¬í•˜ì—¬ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„ì„ ì§„í–‰í•˜ì„¸ìš”.

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-10-06  
**ë¬¸ì„œ ë²„ì „**: 1.0.0
