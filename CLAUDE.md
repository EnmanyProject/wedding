# Claude 작업 규칙 (Wedding 프로젝트)

> 💡 **처음이신가요?** [README.md](README.md)를 먼저 읽어보세요!

---

## 🌐 최상위 지침

**🗣️ 언어 규칙: 모든 대화와 응답은 한글로 작성한다.**
- 코드 주석, 변수명, 함수명 등 코드 자체는 영어 사용 가능
- 설명, 안내, 커밋 메시지는 반드시 한글 사용
- 에러 메시지 해석 및 설명도 한글로 제공

---

## 🎯 핵심 원칙
사용자가 자연스럽게 말하면, Claude가 필요한 파일만 찾아서 작업한다.

---

## 🎮 프로젝트 정보

**프로젝트명**: Wedding 청첩장 웹 애플리케이션
**타입**: Next.js + TypeScript + PostgreSQL
**현재 Phase**: Phase 1 완료, Phase 2 진행중

---

## 💰 토큰 절약 시스템 (핵심!)

### 자동 작동 방식
Claude는 **사용자 요청의 키워드를 분석**하여 필요한 파일만 자동으로 로드합니다.

**예시:**
```
👤 사용자: "회원가입 폼 버그 있어"

🤖 Claude 자동 판단:
- 키워드: "회원가입", "폼"
- 로드: components/signup/, src/app/signup/ (관련 파일만)
- 제외: 다른 모든 파일 (~90% 제외)
```

### 사용자는 편하게 말하면 됨
```
✅ 이렇게 말해도 됨:
"데이터베이스 연결이 안 돼"
"UI가 모바일에서 깨져"
"새 컴포넌트 추가하고 싶어"
"API 에러 나"

❌ 이렇게 말할 필요 없음:
"src/app/api/auth/route.ts의 POST 메서드를 수정해줘"
```

### 토큰 절약 효과
| 방식 | 파일 크기 | 절약률 |
|------|-----------|--------|
| 전체 로드 | ~50KB | 0% |
| 선택 로드 | ~10KB | **80%** |
| compacting 빈도 | 거의 없음 | ⭐⭐⭐⭐⭐ |

---

## 📋 키워드 기반 자동 파일 매핑

Claude가 자동으로 판단하는 규칙:

| 사용자 키워드 | 자동 로드 파일 | 제외 파일 |
|--------------|---------------|-----------|
| **회원가입, 로그인, 인증** | `src/app/signup/`, `src/app/api/auth/`, `components/signup/` | 나머지 전부 |
| **데이터베이스, DB, SQL** | `lib/db.ts`, `migrations/`, `sql/` | 나머지 전부 |
| **API, 라우트, 엔드포인트** | `src/app/api/`, `appapi/` | 나머지 전부 |
| **UI, 컴포넌트, 디자인** | `components/`, `src/app/` (페이지) | 나머지 전부 |
| **반응형, 모바일, 레이아웃** | `components/`, `public/styles/` | 나머지 전부 |
| **타입, 인터페이스, TypeScript** | 관련 `.ts`, `.tsx` 파일만 | 나머지 전부 |
| **버그, 에러, 문제** | 에러 관련 파일만 (동적 판단) | 무관한 모듈 |

---

## 💡 Claude 자동 작업 프로세스

### Step 1: 요청 분석
```
사용자 입력 분석
→ 키워드 추출
→ 작업 타입 판단 (UI/API/DB/버그 등)
→ 필요 파일 목록 생성 (2-3개만)
```

### Step 2: 컨텍스트 로드
```
기본: 2-3개 핵심 파일만
필요시: 단계적으로 추가
원칙: 최소한의 파일로 최대 효과
```

### Step 3: 작업 수행
```
1. MASTER.md 확인 → 현재 Phase 파악
2. 문제 진단 또는 기능 구현
3. 해결책 제시
4. 코드 수정
5. 테스트 방법 안내
```

### Step 4: 후속 작업
```
1. 버전 업데이트 (CHANGELOG.md)
2. Git 커밋 및 푸시
3. MASTER.md 업데이트
```

---

## 🎯 작업 예시

### 예시 1: 버그 수정
```
👤 사용자: "회원가입하면 500 에러 나"

🤖 Claude:
1. 키워드 분석: "회원가입", "500 에러"
2. 파일 로드: src/app/api/auth/signup/route.ts (1개만)
3. 에러 원인 파악
4. 해결 방법 제시
5. 코드 수정
6. 테스트 방법 안내

토큰 사용: ~10KB (전체의 20%)
```

### 예시 2: 기능 추가
```
👤 사용자: "새로운 페이지 추가하고 싶어"

🤖 Claude:
1. 키워드 분석: "페이지", "추가"
2. 파일 로드: src/app/ 구조만 확인
3. 추가 방법 설명
4. 템플릿 코드 제공
5. 라우팅 설정 안내

토큰 사용: ~5KB (전체의 10%)
```

### 예시 3: 복잡한 문제
```
👤 사용자: "모바일에서 UI가 깨지고 API도 느려"

🤖 Claude:
1. 키워드 분석: "모바일", "UI", "API"
2. 1차 로드: components/ (반응형 확인)
3. 2차 로드: src/app/api/ (성능 확인)
4. 문제 분리 진단
5. 각각 해결

토큰 사용: ~15KB (전체의 30%)
여전히 70% 절약!
```

---

## 📂 문서 구조 및 로드 우선순위

```
wedding/ (루트)
├── README.md          ← 0순위: 프로젝트 진입점 (항상 먼저)
├── CLAUDE.md          ← 1순위: 작업 규칙 (자주 로드, 5KB)
├── MASTER.md          ← 2순위: 현재 작업 (자주 로드, 7KB)
├── PROJECT.md         ← 3순위: 전체 계획 (필요시만)
├── CHANGELOG.md       ← 4순위: 작업 이력 (거의 안 로드, 80KB+)
│
├── src/               ← 키워드에 따라 선택적 로드
├── components/        ← 키워드에 따라 선택적 로드
├── lib/               ← 키워드에 따라 선택적 로드
└── public/            ← 키워드에 따라 선택적 로드
```

---

## 🚨 필수 규칙

### 1. 버전 업데이트 (작업 완료 시)
```
CHANGELOG.md 최상단에 추가:
### vX.Y.Z (날짜) - 작업 제목
**작업 내용**: ...
```

### 2. Git 커밋 형식
```bash
git commit -m "vX.Y.Z: [변경 내용 명확히]"
```

### 3. 버전 번호 규칙
```
- v1.0.0 → v2.0.0: Major (대규모 구조 변경)
- v1.0.0 → v1.1.0: Minor (새 기능 추가)
- v1.0.0 → v1.0.1: Patch (버그 수정)
```

---

## 📊 Phase 현황

- ✅ Phase 1: 하이브리드 디자인 시스템 완료
- 🔄 Phase 2: 진행 중

---

## ⚠️ 절대 금지

- ❌ project-management/ 폴더 사용 (이제 루트에 문서 있음)
- ❌ 버전 업데이트 생략
- ❌ Git 푸시 없이 작업 종료
- ❌ 불필요한 파일 전체 로드 (항상 최소한만)
- ❌ PROJECT.md, CHANGELOG.md 자동 로드 (.claudeignore에 등록됨)

---

## 🎓 사용자 가이드

### 이렇게 말하면 됩니다 (예시)
```
"회원가입 폼이 이상해"
"데이터베이스 연결 안 돼"
"모바일 UI 개선하고 싶어"
"API 에러 나는데 해결해줘"
"새 컴포넌트 만들고 싶어"
"타입 에러 나"
```

### Claude가 자동으로 합니다
```
✅ 키워드 분석
✅ 필요한 파일만 로드 (2-3개)
✅ 문제 해결 또는 기능 구현
✅ 테스트 방법 안내
✅ Git 커밋 및 문서 업데이트
```

---

## 🔗 관련 문서 (빠른 참조)

- `README.md` - 프로젝트 진입점 및 가이드
- `MASTER.md` - 현재 작업 (자주 업데이트)
- `PROJECT.md` - 전체 계획 (필요시 명시적 요청)
- `CHANGELOG.md` - 작업 이력 (필요시 명시적 요청)

---

## 📁 프로젝트 기술 스택

**Frontend:**
- Next.js 14+ (App Router)
- TypeScript
- React

**Backend:**
- Next.js API Routes
- PostgreSQL
- Node.js

**스타일링:**
- CSS Modules
- Responsive Design
- 하이브리드 디자인 시스템

---

**🎉 토큰을 80% 절약하면서 편하게 작업하세요!**
**항상 최소 파일만 로드 / 모든 작업은 MASTER.md 기준**
